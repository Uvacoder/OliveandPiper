<div class="title-bar custom-font">
	<h2>{{ 'cart.general.title' | t }}</h2>
{% if customer.tags != blank %} <div id="wsg-spof-link" style="margin-top: 20px; text-align: center; font-size: 1.2em;"> </div> {% endif %}
	<div class="clear"> </div>
</div>

{% if cart.item_count == 0 %}
	<h3 class="empty-cart">{{ 'cart.general.empty' | t }}, <a href="/collections/all">{{ 'cart.general.continue_browsing_html' | t }}</a> </h3>
{% else %}

<div id="bold-cart-msg"> </div>
<form action="/cart" method="post" novalidate class="cart table-wrap" id="cartform">
	<table class="cart-table full table--responsive" border="0" cellspacing="0" cellpadding="0">
		<thead class="cart__row cart__header-labels">
			<th colspan="2"> </th>
			<th>{{ 'cart.general.price' | t }}</th>
			<th>{{ 'cart.general.quantity' | t }}</th>
			<th>{{ 'cart.general.total' | t }}</th>
		</thead>

		<tbody>
			{% for item in cart.items %}
<div class="wsg-collections-list-{{item.id}}" style="display:none"> {{item.product.collections | json}} </div> <div class="wsg-product-tags-{{item.id}}" style="display:none"> {{item.product.tags | json}} </div>
				<tr class="{% cycle 'even', 'odd' %}">
					<td class="cart-table-image col-md-2">
						<a class="cart_thumb" href="{{item.product.url}}" title="View {{item.title | remove: '/ Default Title'| remove: 'Default Title' | remove: '/ Default' | remove: 'Default' | replace: '(Freegifts)', '' }} Page">
							<img src="{{ item | img_url: 'small' }}" alt="{{ item.title | remove: '/ Default Title'| remove: 'Default Title' | remove: '/ Default' | remove: 'Default' | replace: '(Freegifts)', ''  | escape }}"/>
						</a>
					</td>

					<td class="cart-table-title col-sm-5 col-md-3 col-xs-12">
						<a href="  {%if item.variant.metafields.secomapp.freegifts%}{{ item.product.url }}{%else%}{{item.url}}{%endif%}" title="View {{item.title | remove: '/ Default Title'| remove: 'Default Title' | remove: '/ Default' | remove: 'Default' | replace: '(Freegifts)', ''  | escape }}">{{ item.title | remove: '/ Default Title'| remove: 'Default Title' | remove: '/ Default' | remove: 'Default' | replace: '(Freegifts)', ''  }}</a>
						{% assign property_size = item.properties | size %}
						{% if property_size > 0 %}
							<br/>
							{% for p in item.properties %}
								{% unless p.last == blank %}
									{{ p.first }}:
									{% comment %}
									Check if there was an uploaded file associated
									{% endcomment %}
									{% if p.last contains '/uploads/' %}
										<a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
										{% else %}
										{{ p.last }}
									{% endif %}
									<br>
								{% endunless %}
							{% endfor %}
						{% endif %}
						<div class="cart-table-item-remove">
							<a href="/cart/change?line={{ forloop.index }}&quantity=0">{{ 'cart.general.remove' | t }}</a>
						</div>
					</td>

					<td class="cart-table-price col-xs-6 col-sm-4 col-md-2">
						<span class="mobile-label">Price</span> <span class="money"><span class="wsg-item-price_{{item.id}}">{{ item.price | money_with_currency }}</span></span>
					</td>

					<td class="cart-table-quantity col-xs-6 col-sm-4 col-md-2">
						<div class="quantity-controls">
							{%unless item.variant.metafields.secomapp.freegifts%}
							<button type="button" class="qty-minus">-</button>
							{% endunless %}
							<input {%if item.variant.metafields.secomapp.freegifts%}readonly{%endif%} class="number quantity-selector" type="text" size="4" name="updates[{{item.variant.id}}]" id="updates_{{item.variant.id}}" value="{{item.quantity}}"/>
							{%unless item.variant.metafields.secomapp.freegifts%}
							<button type="button" class="qty-plus">+</button>
							{% endunless %}
						</div>

					</td>

					<td class="cart-table-line-price col-xs-12 col-sm-4 col-md-2">
                      <span class="mobile-label">Total</span> <span class ="wsg-line-price_{{item.id}}"><span class="money">{{item.line_price | money_with_currency }}</span></span>
					</td>

				</tr>
			{% endfor %}
		</tbody>
	</table>

	<div class="cart-bottom-box">
{%include 'wsg-ship-partial'%} <p id="wsg-under-ordered" style="display:none"> </p>

		<div class="title-bar custom-font cart-totals--wrapper">
			<div id="cart-total-header">{{ 'cart.general.total' | t }}</div>
			<div id="cart-total-final-price">
				<span class="money wsg-cart-subtotal">{{ cart.total_price | money_with_currency }}</span>
			</div>
		</div>

		<div class="row">

			<div class="col-md-6 checkout-add-note desktop">
				{% if section.settings.allow_note %}
					<p>{{ 'cart.general.note' | t }}…</p>
					<textarea id="note" name="note" class="form-control wsg-note" onblur="updateCartNote()">{{ cart.note }}</textarea>
				{% endif %}
				 
			</div>

			<div id="checkout-buttons" class="col-md-6">
				      {% if section.settings.enable_terms_conditions %}
							<div class="terms-conditions">
								<p>
									<input style="float:none; vertical-align: middle;" type="checkbox" id="agree"/>
									<label style="display:inline; float:none" for="agree">
										{% if section.settings.terms_conditions_link == blank %}
				              {{ 'cart.general.terms_text' | t }}
										{% else %}
				              {{ 'cart.general.terms_text_html' | t | replace: '#', section.settings.terms_conditions_link }}
										{% endif %}
									</label>
								</p>
							</div>
							{% endif %}

				{% if section.settings.enable_continue_shopping %}
					<a href="/" class="custom-font btn btn-default continue-shopping--cart">{{ 'layout.cart.continue_shopping' | t }}</a>
				{% endif %}
				<input id="update_quantities" type="submit" value="{{ 'cart.general.update' | t }}" title="{{ 'cart.general.update' | t }}" name="update" class="btn btn-default custom-font"/>
				<input id="cart_submit" type="submit" value="{{ 'cart.general.checkout' | t }}" name="checkout" class="btn btn-success custom-font wsg-checkout-main"/>
				{% if additional_checkout_buttons and customer.tags == blank %}
					<div id="additional-checkout-buttons">
						{{ content_for_additional_checkout_buttons }}
					</div>
				{% endif %}

			</div>
		</div>

			<div class="col-md-6 checkout-add-note mobile">
				{% if section.settings.allow_note %}
					<p>{{ 'cart.general.note' | t }}…</p>
					<textarea id="note" name="note" class="form-control wsg-note" onblur="updateCartNote()">{{ cart.note }}</textarea>
				{% endif %}
				 
			</div>
	</div>
<!--START Yotpo Reviews Carousel -->
<div class="yotpo yotpo-reviews-carousel" data-header-customisation-enabled="1" data-header-customisation-text data-background-color="transparent" data-mode="top_rated" data-type="site" data-count="9" data-show-bottomline="1" data-autoplay-enabled="1" data-autoplay-speed="3000" data-show-navigation="1"> </div>
<!--END Yotpo Reviews Carousel -->
</form>

<script>
    $('body').on('click', '[name="checkout"], [name="goto_pp"], [name="goto_gc"]', function() {
        var $agree = $('#agree');
        if ($agree.length === 0 || $agree.is(':checked')) {
            $(this).submit();
        }
        else {
            alert("{{ 'cart.general.terms_agree' | t }}");
            return false;
        }
    });
</script>

{% endif %}

{% schema %}
{
  "name": "Cart page",
  "settings": [
    {
      "type": "checkbox",
      "id": "allow_note",
      "label": "Enable cart notes",
      "default": false
    },
	{
	"type": "checkbox",
	"id": "enable_continue_shopping",
	"label": "Enable continue shopping",
	"default": false
	},
	{
	"type": "header",
	"content": "Terms and conditions"
	},
	{
		"type": "checkbox",
		"id": "enable_terms_conditions",
		"label": "Enable",
		"default": false
	},
	{
		"type": "url",
		"id": "terms_conditions_link",
		"label": "Link"
	},
	{
		"type":"paragraph",
		"content": "Additional payment options, other than PayPal, won't work with the terms and conditions checkbox."
	}
  ]
}
{% endschema %}

<!-- Bold Update Cart Notes -->
 <script>
 function updateCartNote(){
 $('[name=update]').click();
 }
 </script>
<!-- End update Cart Notes -->

{%include 'wsg-cart'%}
